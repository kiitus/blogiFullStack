{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Blog","blog","deleteBlog","title","author","user","userName","onClick","id","token","axios","get","then","response","data","newToken","newBlog","config","headers","Authorization","post","delete","credentials","CreateBlog","adder","useState","setTitle","setAuthor","url","setUrl","onSubmit","event","preventDefault","type","value","name","onChange","target","WrongLogin","message","error","className","AddedBlog","errorStyle","color","fontSize","style","App","blogs","setBlogs","username","setUsername","password","setPassword","setUser","errorMessage","setErrorMessage","blogMessage","setBlogMessage","setError","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","poistettu","tmpArray","filter","catch","e","console","log","setTimeout","loginService","setItem","stringify","removeItem","createdBlog","concat","map","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.06c8317b.chunk.js","sourcesContent":["import React from 'react'\r\nconst Blog = ({ blog,deleteBlog }) => (\r\n  <div> \r\n    {blog.title} {blog.author} {blog.user.userName} <button onClick={()=>deleteBlog(blog.id)}>delete</button>\r\n  </div>\r\n)\r\n\r\nexport default Blog\r\n","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst create = (newBlog)=>{\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const request = axios.post(baseUrl,newBlog,config)\n  return request.then(response => response.data)\n}\n\nconst deleteBlogDB = (id)=>{\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  return axios.delete(`${baseUrl}/${id}`,config)\n\n}\n\n\n//Postissa omistaja(user) otetaan tokenista, ei muokatusta \n//user string id:stä\n\nexport default { getAll, setToken, create,deleteBlogDB}","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\n\r\n/*const login = (credentials ) =>{\r\n    let request = axios.post(baseUrl,credentials)\r\n        return request.then((response)=>{\r\n            return response.data\r\n        }).catch((error)=>{\r\n        console.log(error)\r\n    })}\r\n */ \r\nconst login = (credentials) =>{\r\n   return axios.post(baseUrl,credentials).then((response)=>\r\n    {\r\n        return response.data\r\n    })\r\n}\r\n\r\n\r\nexport default { login }\r\n","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState('') \n  const [password, setPassword] = useState('') \n  const [user, setUser] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [blogMessage, setBlogMessage] = useState(null)\n  const [error,setError] = useState(true)\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      {\n      setBlogs( blogs )\n    \n      }\n    )  \n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n    blogService.setToken(user.token)\n    //  noteService.setToken(user.token)\n    }\n  }, [])\n\n\n \n  const handleLogin = (event)=>{\n    event.preventDefault()\n    loginService.login({username,password}).then((user)=>{\n      console.log(user)\n      window.localStorage.setItem(\n        'loggedBlogAppUser', JSON.stringify(user)\n      ) \n      blogService.setToken(user.token)\n      setUser(user)\n      setUsername(\"\")\n      setPassword(\"\")\n    }\n    ).catch((error)=>{ \n    setErrorMessage(\n      `${error.response.data.error}`\n    )\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 2000)\n  })\n    \n  }\n  \n  const addBlogToState = (newBlog)=>  \n  {\n\n    blogService.create(newBlog).then((createdBlog)=>\n    {\n  \n    //Saattaa muuttaa objekit id:n string id:ksi!!!! Mahdollisesti ongelmia blogin muutoksessa\n    //Kannattanee ottaa user id kirjautumistiedoista\n  \n    createdBlog.user = {id:createdBlog.user,userName:user.username}\n    setBlogs(blogs.concat(createdBlog))\n   \n    console.log(blogs[0])\n    console.log(createdBlog)\n\n    setError(false)\n   setBlogMessage(\n    `New blog added ${createdBlog.title}`\n  )\n  setTimeout(() => {\n    setBlogMessage(null)\n  },2000)\n\n  \n  \n  })\n}\n  \nconst deleteBlog = (id)=>\n{\n  blogService.deleteBlogDB(id).then((poistettu)=>\n  {\n    const tmpArray = blogs.filter((blog)=>\n    {\n      return blog.id !== id\n    })\n    setBlogs(tmpArray)\n  }).catch((e)=>\n  {\n    console.log(\"Eri käyttäjän tekemä\")\n   setError(true)\n    setBlogMessage(\n      `${e.response.data.error}`\n      \n    )\n    setTimeout(() => {\n      setBlogMessage(null)\n    },2000)\n  })\n}\n\n  const logout = ()=>{\n\n    window.localStorage.removeItem('loggedBlogAppUser')\n    setUser(null)\n  }\n\n  \n\n  if(user === null )\n  {\n    return (\n\n    <div>\n      <WrongLogin message={errorMessage} error={error} />\n      <form onSubmit={handleLogin}>\n        <div>\n          username\n            <input\n            type=\"text\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          password\n            <input\n            type=\"password\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n          \n        </div>\n        <button type=\"submit\">login</button>\n      </form>\n  \n    </div>\n    )\n      }\n  \n  \n  return (\n\n    \n    <div>\n\n      <h3>Logged in as {user.username} <button onClick={logout}>\n  Logout\n</button></h3>\n<AddedBlog message={blogMessage} error={error}/>\n<CreateBlog adder={addBlogToState}/>\n      <h2>blogs</h2>\n      {blogs.map(blog =>\n        <Blog key={blog.id} blog={blog} deleteBlog={deleteBlog} />\n      )}\n    </div>\n  )\n}\n\n\nconst CreateBlog = ({adder})=>{\n\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const createBlog = (event)=>\n  {\n    event.preventDefault()\n    const newBlog = {\n      title,\n      author,\n      url\n    }\n    adder(newBlog)\n      setTitle(\"\")\n      setAuthor(\"\")\n      setUrl(\"\")\n  }\n  return(\n\n    <div>\n\n<form onSubmit={createBlog} >\n      <h2>Create new</h2>\n\n <p>Title <input type=\"text\" value={title} name=\"title\"\n  onChange={({ target }) =>setTitle(target.value)}/>\n</p>\n <p>Author <input type=\"text\" value={author} name=\"author\"\n onChange={({ target }) => setAuthor(target.value)}/>\n </p>\n <p>\n Url <input type=\"text\" value={url} name=\"url\"\n onChange={({ target }) => setUrl(target.value)}/>\n</p>\n<button type=\"submit\">Add blog</button>\n</form>\n</div>\n  )\n\n}\n\nconst WrongLogin = ({message,error}) =>\n{\n  if(message ===null)\n  {\n    return null\n  }\n  else\n  {\n    return(\n      <div className=\"error\">\n      {message}\n    </div>\n    )\n  }\n  \n}\nconst AddedBlog = ({message,error}) =>\n{\n\n  const errorStyle = { color: error ? 'red' : 'green',fontSize:30 }\n  \n  if(message ===null)\n  {\n    return null\n  }\n  else\n  {\n\n    \n    return(\n      <div  style={errorStyle}>\n      {message}\n    </div>\n    )\n  }\n  \n}\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}